<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3.1. Unexpected Obstacle - PMI-LA Case Study Challenge</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèÜ</text></svg>">
</head>
<body>
    <div id="nav-placeholder"></div>

    <main class="main-content">
        <h1>3.1. Unexpected Obstacle</h1>
        
        <section class="surprise-overview">
            <h2>Scenario Continuation</h2>
            <p>The paint booth has been approved by TractorCo‚Äôs corporate office and is enroute to the facility. 
                However, the team is suddenly faced with an <b>unexpected obstacle</b>:</p>
        </section>

        <section class="surprise-passwordinfo">
            <h3>Password Information (FOR TESTING)</h3>
            <ul>
                <li><b>Scenario 1 (Fire Marshal Adds Equipment Requirement):</b> aaa</li>
                <li><b>Scenario 2 (Paint Booth Logistics Delay and Alternative Option):</b> bbb</li>
                <li><b>Scenario 3 (AQMD Permit Hold ‚Äì Detailed Building Plans Required):</b> ccc</li>
                <br>
                <li><b>Reset scenario:</b> add a '?reset' parameter to the URL: e.g: "unexpected-obstacle.html?reset"</li><br>
            </ul>
        </section>

        <section id="passcode-section" class="scenario-selection">
            <h2>Enter Your Scenario Passcode</h2>
            <p>Please enter your assigned passcode to reveal your unique scenario:</p>
            
            <div class="passcode-input">
                <input type="text" id="passcode" placeholder="Enter passcode" maxlength="3">
                <button onclick="checkPasscode()" class="submit-button">Submit</button>
                <p id="error-message" class="error" style="display: none; color: red;">Invalid passcode. Please try again.</p>
            </div>
        </section>

        <section id="scenario-1" class="scenario-content" style="display: none;">
            <h3>Obstacle: Fire Marshal Adds Equipment Requirement</h3>
            <div class="scenario-details">
                <p>During the facility inspection, the fire marshal informs the team that a new Double Check Detector Assembly (DCDA) is required for backflow prevention of the sprinkler system. This was not previously scoped, and installation must be completed before final approval of the sprinkler permit.</p>
                <ul>
                    <li><b>Estimated cost impact:</b> +$10,000 (equipment, labor, re-inspection)</li>
                    <li><b>Schedule impact:</b> +15 days to order and install</li>
                </ul> 
                <br>
                <p>The fire marshal also informs you of an alternative option: Installing a dry chemical suppression system instead of a sprinkler system. This would be a more cost-effective solution, but may come with a longer schedule impact. Permit fees remain unchanged, as the dry chemical permit costs the same as the sprinkler permit.</p>
                <ul>
                    <li><b>Estimated cost impact:</b>
                        <ul>
                            <li>+$6,000 (Dry chemical suppression system, installation materials, labor)</li>
                            <li>Minus the originally budgeted sprinkler installation costs </li>
                        </ul>
                    </li>
                    <li><b>Schedule impact:</b> +30 days to order and install</li>
                </ul>
                <br>
            <p><b>Actions required:</b></p>
                    <ul>
                        <li>Evaluate both options and submit a <b>change request</b> for your selected path</li>
                        <li>Reallocate tasks on the <b>Gantt chart</b> to accommodate new dependencies</li>
                        <li>Update the <b>cost baseline diagram</b> to account for cost differences</li>
                    </ul>
            </div>
        </section>

        <section id="scenario-2" class="scenario-content" style="display: none;">
            <h3>Obstacle: Paint Booth Logistics Delay and Alternative Option</h3>
            <div class="scenario-details">
                <p>The paint booth vendor notifies you that due to logistics issues, the originally ordered booth will be <b>delayed by an additional 30 days</b>, beyond the original 30-day estimate.</p>
                <p>As an alternative, they offer a different model in stock that:</p>
                
                <ul>
                    
                    <li>Can be delivered in 21 days (i.e., 9 days sooner than the original planned delivery date)</li>
                    <li>Is $10,000 more expensive</li>
                    <li>Slightly more energy efficient</li>
                </ul>
                <br>
                <p><b>Actions required:</b></p>
                        <ul>
                            <li>Evaluate both options and submit a <b>change request</b> for your selected path</li>
                            <li>Reallocate tasks on the <b>Gantt chart</b> to accommodate new dependencies</li>
                            <li>Update the <b>cost baseline diagram</b> to account for cost differences</li>
                        </ul>
            </div>
        </section>

        <section id="scenario-3" class="scenario-content" style="display: none;">
            <h3>Obstacle: SCAQMD Permit Hold ‚Äì Detailed Building Plans Required</h3>
            <div class="scenario-details">
                <p>
                    On day 7 of the <b>‚ÄúInspect Facility, Apply for Permits‚Äù</b> activity, the
                    South Coast Air Quality Management District (SCAQMD) places your permit
                    application on hold. Inspectors are requesting detailed building plans
                    showing the location of the paint booth‚Äôs exhaust, to verify it is at least
                    500 feet from any residential or school property. This requirement was not
                    flagged in the initial review. 
                    
                    <ul>
                        <li>You call up your preferred civil engineering firm, who gives you a quote of $3,000 for the plans, and guarantees a 7 day turnaround.</li>
                        <li>Wendy, your contact at SCAQMD tells you that they can approve the plans in 7 days upon submission.</li>
                    </ul>
                  </p>

                  <p>
                    The contractor in charge of installing the paint booth hears about this - they mention that they have an in-house engineer
                    who can prepare the drawings at a lower cost, though with a longer turnaround. 
                    <ul>
                        <li>They offer to do the work in-house for $1,500, and guarantee a 21 day turnaround.</li>
                        <li>Approval from SCAQMD is still guaranteed in 7 days upon submission.</li>
                    </ul>
                  </p>

            </div>
            <br>
                <p><b>Actions required:</b></p>
                <ul>
                    <li>Evaluate both options and submit a <b>change request</b> for your selected path</li>
                    <li>Reallocate tasks on the <b>Gantt chart</b> to accommodate new dependencies</li>
                    <li>Update the <b>cost baseline diagram</b> to account for cost differences</li>
                </ul>
            </div>
        </section>

        <div class="navigation-buttons">
            <a href="execution.html" class="button back">‚üµ Back: Execution</a>
            <a href="change-request.html" class="button">Next: Responding to Change ‚ü∂</a>
        </div>
    </main>

    <script src="navigation.js"></script>
    <script src="config.js"></script>
    <script src="countdown.js"></script>
    <script>
        // Passcode mappings
        const PASSCODE_MAP = {
            'aaa': 1,
            'bbb': 2,
            'ccc': 3
        };

        // Storage key for localStorage
        const STORAGE_KEY = 'selectedScenario';

        function checkPasscode() {
            const passcode = document.getElementById('passcode').value.toLowerCase();
            const scenarioNumber = PASSCODE_MAP[passcode];
            
            if (scenarioNumber) {
                // Valid passcode
                localStorage.setItem(STORAGE_KEY, scenarioNumber);
                revealScenario(scenarioNumber);
                document.getElementById('passcode-section').style.display = 'none';
                document.getElementById('error-message').style.display = 'none';
            } else {
                // Invalid passcode
                document.getElementById('error-message').style.display = 'block';
            }
        }

        function revealScenario(scenarioNumber) {
            // Hide all scenarios first
            document.querySelectorAll('.scenario-content').forEach(scenario => {
                scenario.style.display = 'none';
            });
            
            // Show the selected scenario
            document.getElementById('scenario-' + scenarioNumber).style.display = 'block';
        }

        // Handle page load and URL parameters
        document.addEventListener('DOMContentLoaded', function() {
            // Check for reset parameter
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('reset')) {
                localStorage.removeItem(STORAGE_KEY);
                // Remove the reset parameter from URL without refreshing
                window.history.replaceState({}, '', window.location.pathname);
            }

            // Check localStorage for existing scenario
            const savedScenario = localStorage.getItem(STORAGE_KEY);
            if (savedScenario) {
                document.getElementById('passcode-section').style.display = 'none';
                revealScenario(savedScenario);
            }

            // Add enter key support for passcode input
            document.getElementById('passcode').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkPasscode();
                }
            });
        });
    </script>
</body>
</html>