<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3.1. Unexpected Obstacle - PMI-LA Case Study Challenge</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="nav-placeholder"></div>

    <main class="main-content">
        <h1>3.1. Unexpected Obstacle</h1>
        
        <section class="surprise-overview">
            <h2>Scenario Continuation</h2>
            <p>The paint booth has been approved by TractorCo’s corporate office and is enroute to the facility. 
                However, the team is suddenly faced with an <b>unexpected obstacle</b>:</p>
        </section>

        <section id="passcode-section" class="scenario-selection">
            <h2>Enter Your Scenario Passcode</h2>
            <p>Please enter your assigned passcode to reveal your unique scenario:</p>
            
            <div class="passcode-input">
                <input type="text" id="passcode" placeholder="Enter passcode" maxlength="3">
                <button onclick="checkPasscode()" class="submit-button">Submit</button>
                <p id="error-message" class="error" style="display: none; color: red;">Invalid passcode. Please try again.</p>
            </div>
        </section>

        <section id="scenario-1" class="scenario-content" style="display: none;">
            <h3>Obstacle: Fire Marshal Adds Equipment Requirement</h3>
            <div class="scenario-details">
                <p>During the facility inspection, the fire marshal informs the team that a Double Check Detector Assembly (DCDA) is required for backflow prevention. This was not previously scoped, and installation must be completed before final approval of the sprinkler permit.</p>
                <ul>
                    <li><b>Estimated cost impact:</b> +$15,000 (equipment, labor, re-inspection)</li>
                    <li><b>Schedule impact:</b> +30 days to order and install</li>
                    <li><b>Action required:</b>
                        <ul>
                            <li>Submit a <b>change request</b> for scope and budget</li>
                            <li>Reallocate tasks on the <b>Gantt chart</b> to accommodate new dependencies</li>
                            <li>Revise the <b>cost baseline</b> and communicate change to stakeholders</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>

        <section id="scenario-2" class="scenario-content" style="display: none;">
            <h3>Obstacle: Paint Booth Logistics Delay and Alternative Option</h3>
            <div class="scenario-details">
                <p>The paint booth vendor notifies you that due to logistics issues, the originally ordered booth will be <b>delayed by an additional 30 days</b>, beyond the original 30 day estimate. As an alternative, the vendor offers a different model that is:</p>
                <ul>
                    <li>$10,000 more expensive</li>
                    <li>Can be delivered in 21 days (i.e., 9 days sooner than the original planned delivery date)</li>
                    <li>Slightly more energy efficient</li>
                    <br>
                    <li><b>Estimated cost impact:</b> +$10,000 (if the alternate model is selected)</li>
                    <li><b>Schedule impact:</b> Varies based on decision</li>
                    <br>
                    <li><b>Action required:</b>
                        <ul>
                            <li>Evaluate both options and submit a change request for selected path</li>
                            <li>Reflect the decision in the updated schedule and critical path</li>
                            <li>Update the cost baseline to account for price difference or delay-related costs</li>
                            <li>Consider future operational savings as a potential long-term benefit of the energy-efficient model</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>

        <section id="scenario-3" class="scenario-content" style="display: none;">
            <h3>Obstacle: AQMD Permit Hold – Detailed Building Plans Required</h3>
            <div class="scenario-details">
                <p>The Air Quality Management District (AQMD) places the permit on hold and requests detailed building plans showing the location of the paint booth's exhaust and verifying that it is at least 500 feet from any residential or school property.</p>
                <p>To fulfill this request, the team must:</p>
                <ul>
                    <li>Hire a contractor or civil engineer to draft compliant drawings</li>
                    <li>Submit them for AQMD review</li>
                    <li>Estimated cost impact: +$2000 (for drawings and coordination)</li>
                    <li>Schedule impact: +14 days (drawing, submission, and review)</li>
                    <li>Action required:
                        <ul>
                            <li>Submit a change request for scope and timeline modification</li>
                            <li>Update the Gantt chart to reflect this unexpected review delay</li>
                            <li>Adjust the cost baseline to include consultant fees</li>
                            <li>Add an item to the risk register for regulatory review escalation</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>

        <div class="navigation-buttons">
            <a href="change-request.html" class="button">Next: Responding to Change</a>
        </div>
    </main>

    <div class="right-sidebar"></div>

    <script src="navigation.js"></script>
    <script>
        // Passcode mappings
        const PASSCODE_MAP = {
            'aaa': 1,
            'bbb': 2,
            'ccc': 3
        };

        // Storage key for localStorage
        const STORAGE_KEY = 'selectedScenario';

        function checkPasscode() {
            const passcode = document.getElementById('passcode').value.toLowerCase();
            const scenarioNumber = PASSCODE_MAP[passcode];
            
            if (scenarioNumber) {
                // Valid passcode
                localStorage.setItem(STORAGE_KEY, scenarioNumber);
                revealScenario(scenarioNumber);
                document.getElementById('passcode-section').style.display = 'none';
                document.getElementById('error-message').style.display = 'none';
            } else {
                // Invalid passcode
                document.getElementById('error-message').style.display = 'block';
            }
        }

        function revealScenario(scenarioNumber) {
            // Hide all scenarios first
            document.querySelectorAll('.scenario-content').forEach(scenario => {
                scenario.style.display = 'none';
            });
            
            // Show the selected scenario
            document.getElementById('scenario-' + scenarioNumber).style.display = 'block';
        }

        // Handle page load and URL parameters
        document.addEventListener('DOMContentLoaded', function() {
            // Check for reset parameter
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('reset')) {
                localStorage.removeItem(STORAGE_KEY);
                // Remove the reset parameter from URL without refreshing
                window.history.replaceState({}, '', window.location.pathname);
            }

            // Check localStorage for existing scenario
            const savedScenario = localStorage.getItem(STORAGE_KEY);
            if (savedScenario) {
                document.getElementById('passcode-section').style.display = 'none';
                revealScenario(savedScenario);
            }

            // Add enter key support for passcode input
            document.getElementById('passcode').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkPasscode();
                }
            });
        });
    </script>
</body>
</html>